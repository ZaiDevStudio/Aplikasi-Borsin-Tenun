<!DOCTYPE html><html lang="id"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Input Ulos</title><link rel="stylesheet" href="style.css?v=FINAL"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"><style>.input-group{position:relative;display:flex;align-items:center;}.input-group span{position:absolute;left:15px;color:#555;font-weight:bold;}.input-group input{padding-left:40px;}</style></head><body>
<div class="navbar"><a href="dashboard.html" class="nav-btn"><i class="fas fa-arrow-left"></i></a><div class="brand-text"><h2>Input Ulos</h2><p>Stok Baru</p></div></div><div class="container"><div class="card"><form id="f"><label>Foto</label><input type="file" id="foto" accept="image/*" required class="form-control"><label>Nama</label><input type="text" id="nama" required class="form-control"><label>Jenis</label><input type="text" id="jenis" required class="form-control"><label>Motif</label><input type="text" id="motif" required class="form-control"><label>Warna</label><input type="color" id="warna" value="#800000" style="width:100%;height:40px;border-radius:10px;border:1px solid #ddd;margin-bottom:15px">
<label>Upah Penenun</label><div class="input-group"><span>Rp</span><input type="number" id="upah" required class="form-control"></div>
<label>Stok Awal</label><input type="number" id="stok" required class="form-control">
<label>Harga Jual</label><div class="input-group"><span>Rp</span><input type="number" id="harga" required class="form-control"></div>
<button id="btn" class="btn" style="margin-top:15px">SIMPAN</button></form></div></div><div class="bottom-nav"><a href="dashboard.html" class="nav-item"><i class="fas fa-home"></i><span>Home</span></a><a href="pesanan.html" class="nav-item"><i class="fas fa-clipboard-list"></i>Pesanan</a><a href="data_karyawan.html" class="nav-item"><i class="fas fa-users"></i>Karyawan</a><a href="slip_gaji.html" class="nav-item"><i class="fas fa-wallet"></i>Keuangan</a></div>
<script type="module">import{db}from"./config.js";import{collection,addDoc}from"https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";const resize=(f)=>new Promise(r=>{const rd=new FileReader();rd.readAsDataURL(f);rd.onload=e=>{const i=new Image();i.src=e.target.result;i.onload=()=>{const c=document.createElement('canvas'),m=600,s=m/i.width;c.width=m;c.height=i.height*s;c.getContext('2d').drawImage(i,0,0,c.width,c.height);r(c.toDataURL('image/jpeg',0.7))}}});document.getElementById('f').onsubmit=async e=>{e.preventDefault();const btn=document.getElementById('btn');btn.innerText="...";btn.disabled=true;try{const d={nama:document.getElementById('nama').value,jenis:document.getElementById('jenis').value,motif:document.getElementById('motif').value,warna:document.getElementById('warna').value,upah:Number(document.getElementById('upah').value),stock:Number(document.getElementById('stok').value),harga:Number(document.getElementById('harga').value),timestamp:new Date()};const f=document.getElementById('foto');if(f.files[0])d.foto=await resize(f.files[0]);await addDoc(collection(db,"ulos"),d);alert("Berhasil!");window.location.href="ulos.html";}catch(er){alert(er.message);btn.innerText="SIMPAN";btn.disabled=false}}</script></body></html>
